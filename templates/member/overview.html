{% extends "member/base.html" %}
{% load compress static %}

{% block member_content %}

<div id="member-tag-cloud" class="tag-cloud">
</div>

<ul id="member-activity-feed" class="feed media-list">
</ol>

<script type="text/javascript">
    keyword_activity = {{keyword_activity|safe}};
</script>

{% compress js %}
<script type="text/coffeescript" src="{% static "js/member.coffee" %}"></script>
{% endcompress %}

{% compress js %}
<script type="text/coffeescript">
    $(".activity .media-body .text").expander
        slicePoint: 350
    tags = ({name: x[0], count: x[1], url: '#'} for x in keyword_activity)
    tags = _.sortBy tags, (x) -> x.name
    $("#member-tag-cloud").tag_cloud tags

    feed_view = new MemberActivityFeedView member

    $("#member-tag-cloud li a").click (ev) ->
        ev.preventDefault()
        kw = $.trim $(@).html()
        feed_view.filter_keyword kw
</script>
{% endcompress %}

{% endblock %}
